<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>X5 Admin</title>
  <meta name="robots" content="noindex,nofollow" />
  <style>
    :root { color-scheme: dark; --bg:#0b0b0b; --card:#121212; --line:#1f1f1f; --muted:#9aa0a6; --acc:#5eead4; }
    * { box-sizing: border-box; }
    body{ margin:0; background:var(--bg); color:#fff; font:14px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";}
    header{ position:sticky; top:0; z-index:10; background:rgba(0,0,0,.6); backdrop-filter:saturate(140%) blur(8px); border-bottom:1px solid var(--line); }
    .wrap{ max-width:1080px; margin:0 auto; padding:16px; }
    .row{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    input,select,button,textarea{ background:#171717; border:1px solid var(--line); color:#fff; padding:8px 10px; border-radius:10px; }
    input:focus,select:focus,textarea:focus{ outline:none; border-color:#3a3a3a; }
    button{ cursor:pointer; }
    button.primary{ background:#1d312e; border-color:#24443e; color:#8af5e2; }
    button.warn{ background:#2e1d1d; border-color:#443030; color:#fca5a5; }
    .tabs{ display:flex; gap:8px; margin-top:12px; }
    .tabs button{ padding:10px 14px; border-radius:999px; }
    .tabs button.active{ background:#222; border-color:#333; }
    .grid{ display:grid; gap:12px; grid-template-columns: repeat(1, minmax(0,1fr)); }
    @media (min-width: 900px){ .grid{ grid-template-columns: 2fr 1fr; } }
    .card{ background:var(--card); border:1px solid var(--line); border-radius:14px; padding:16px; }
    .muted{ color:var(--muted); }
    table{ width:100%; border-collapse: collapse; }
    th,td{ padding:8px 6px; border-bottom:1px dashed var(--line); vertical-align: top; }
    .chip{ padding:2px 8px; border:1px solid var(--line); border-radius:999px; font-size:12px; color:var(--muted); }
    .right{ text-align:right; }
    .flex{ display:flex; gap:8px; align-items:center; }
    .hidden{ display:none; }
    .code{ background:#0f0f0f; border:1px solid var(--line); padding:8px; border-radius:8px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
  </style>
</head>
<body>
  <header>
    <div class="wrap row">
      <strong>ğŸ›  X5 Admin</strong>
      <input id="base" placeholder="https://x5capital.onrender.com" size="36">
      <input id="token" placeholder="ADMIN_TOKEN" size="30">
      <button id="save" class="primary">ä¿å­˜</button>
      <span class="muted">ï¼ˆæ²’æœ‰ Token å°±ç„¡æ³•ä¿®æ”¹ï¼‰</span>
    </div>
    <div class="wrap tabs">
      <button data-tab="items" class="active">å•†å“</button>
      <button data-tab="orders">è¨‚å–®</button>
      <button data-tab="tools">å·¥å…·</button>
    </div>
  </header>

  <main class="wrap">
    <!-- Items -->
    <section id="tab-items">
      <div class="grid">
        <div class="card">
          <div class="row" style="justify-content:space-between">
            <div class="row">
              <input id="q" placeholder="æœå°‹ id / title" size="24">
              <select id="sort"><option value="sort">æ’åº: sort_order</option><option value="recent">æ’åº: å»ºç«‹æ™‚é–“</option><option value="title">æ’åº: åç¨±</option></select>
              <button id="reloadItems">é‡æ–°è¼‰å…¥</button>
            </div>
            <div class="row">
              <button id="exportItems">åŒ¯å‡º JSON</button>
              <button id="importItems">åŒ¯å…¥ JSON</button>
            </div>
          </div>
          <div style="overflow:auto; max-height:62vh; margin-top:6px;">
            <table id="itemsTable">
              <thead><tr>
                <th style="width:28%">å•†å“</th><th>åˆ†é¡</th><th class="right">åƒ¹æ ¼</th><th class="right">åº«å­˜</th><th class="right">æ’åº</th><th>æ“ä½œ</th>
              </tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        <div class="card">
          <h3 id="formTitle">æ–°å¢ / ç·¨è¼¯å•†å“</h3>
          <div class="grid" style="grid-template-columns: 1fr;">
            <input id="f_id" placeholder="idï¼ˆå”¯ä¸€ï¼Œä¾‹ï¼šalpha-pass-1mï¼‰">
            <input id="f_sku"  placeholder="skuï¼ˆå¯ç•™ç©ºï¼åŒ idï¼‰">
            <input id="f_title" placeholder="title">
            <textarea id="f_desc" placeholder="description" rows="3"></textarea>
            <input id="f_category" placeholder="categoryï¼ˆä¾‹ï¼šmembership/designï¼‰">
            <div class="row">
              <input id="f_price" type="number" step="0.01" placeholder="price">
              <input id="f_stock" type="number" step="1" placeholder="stock">
            </div>
            <input id="f_img" placeholder="image URL">
            <input id="f_sort" type="number" step="1" placeholder="sort_orderï¼ˆå¯ç©ºï¼‰">
            <div class="row">
              <button id="submitItem" class="primary">Upsert</button>
              <button id="resetForm">é‡ç½®</button>
            </div>
            <div id="formMsg" class="muted"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Orders -->
    <section id="tab-orders" class="hidden">
      <div class="card row" style="justify-content:space-between">
        <div class="row">
          <select id="o_status">
            <option value="">å…¨éƒ¨</option>
            <option value="pending">pending</option>
            <option value="paid">paid</option>
            <option value="cancelled">cancelled</option>
            <option value="expired">expired</option>
          </select>
          <input id="o_q" placeholder="æœå°‹ id" size="24">
          <button id="reloadOrders">é‡æ–°è¼‰å…¥</button>
          <span id="ordersMsg" class="muted"></span>
        </div>
        <div class="row">
          <span id="ordersCount" class="chip">0 ç­†</span>
        </div>
      </div>
      <div class="card" style="overflow:auto; max-height:72vh;">
        <table id="ordersTable">
          <thead><tr>
            <th>è¨‚å–®</th><th>è³‡ç”¢/é‡‘é¡</th><th>ç‹€æ…‹</th><th>å»ºç«‹</th><th>åˆ°æœŸ</th><th>å‹•ä½œ</th>
          </tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Tools -->
    <section id="tab-tools" class="hidden">
      <div class="card">
        <h3>æ¸…ç†é€¾æœŸè¨‚å–®</h3>
        <div class="row">
          <button id="sweep" class="warn">æƒé€¾æœŸï¼ˆ/orders/sweep-expiredï¼‰</button>
          <span id="sweepMsg" class="muted"></span>
        </div>
      </div>
      <div class="card">
        <h3>å¿«é€Ÿè²¼ä¸Š JSON åŒ¯å…¥ï¼ˆåŒ /items/bulk-upsertï¼‰</h3>
        <p class="muted">æ ¼å¼ï¼šé™£åˆ—ï¼Œæ¯ç­†å¯å« idã€titleã€descriptionã€categoryã€priceã€stockã€imgã€sortOrder</p>
        <textarea id="jsonArea" rows="12" class="code" placeholder='[{"id":"alpha-pass-1m","title":"Alpha Pass(æœˆ)","price":19,"stock":50}]'></textarea>
        <div class="row" style="margin-top:8px;">
          <button id="bulkUpsert" class="primary">é€å‡º</button>
          <span id="bulkMsg" class="muted"></span>
        </div>
      </div>
    </section>
  </main>

  <script src="admin.js"></script>
</body>
</html>
